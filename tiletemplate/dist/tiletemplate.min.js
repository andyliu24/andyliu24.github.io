/*! tileTemplate v1.0.0 | a simple javascript template engine. | MIT License | By: Pandao | https://github.com/pandao/tileTemplate | 2014-12-08 */
!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require,exports,module):"function"==typeof define?define(a):a(function(){},window.tileTemplate={},{})}(function(a,b){"use strict";var c=function(a){return"undefined"!=typeof document?document.getElementById(a):a};"function"!=typeof"".trim&&(String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")});var d=b;b.version="1.0.0",b.tags=[],b.caches=[],b.extend=function(a,b){b=b||this;for(var c in a)"undefined"==typeof b[c]&&(b[c]=a[c]);return b},b.escape=function(a){return a.replace(/\</gim,"&lt;").replace(/\>/gim,"&gt;").replace(/\"/gim,"&quot;").replace(/\'/gim,"&apos;")},b.unescape=function(a){return a.replace(/\&lt;/gim,"<").replace(/\&gt;/gim,">").replace(/\&quot;/gim,'"').replace(/\&apos;/gim,"'")},b.settings={debug:!1,cached:!0,filter:!0,openTag:"<%",closeTag:"%>"},b.set=b.config=function(){arguments&&arguments.length>1?this.settings[arguments[0]]=arguments[1]:this.settings=this.extend(this.settings,arguments[0])},b.xssFilter=function(a,b,c){return a=a.replace(/\s*<\s*iframe\s*(.*)\s*>\s*<\s*\/iframe\s*>\s*/gim,""),a=a.replace(new RegExp(b+"s*(.*)s*alerts*(s*(.*)s*)s*;?s*(.*)"+c,"igm"),""),a=a.replace(new RegExp(b+"s*(.*)s*confirms*(s*(.*)s*)s*;?s*(.*)"+c,"igm"),""),a=a.replace(new RegExp(b+"s*(.*)s*prompts*(s*(.*)s*)s*;?s*(.*)"+c,"igm"),""),a=a.replace(new RegExp(b+"s*(.*)s*windows*(.|;)s*(.*)"+c,"igm"),""),a=a.replace(new RegExp(b+"s*(.*)s*documents*(.|;)s*(.*)"+c,"igm"),""),a=a.replace(new RegExp(b+"s*(.*)s*createElements*(s*(.*)s*)s*(.*)"+c,"igm"),""),a=a.replace(new RegExp(b+"s*(.*)s*(\\$|jQuery)s*(.*)s*(s*(.*)s*)s*(.*)"+c,"igm"),""),a=a.replace(new RegExp(b+"s*(.*)s*eval(s*(.*)s*)s*(.*)"+c,"igm"),""),a.trim()},b.compile=function(a,b,e){var f=(new Date).getTime(),g={include:!1,name:"tile"+f};b=b||{},e=e||{},e=this.extend(g,e);var h=(e.include,this.settings.filter),i=this.settings.debug,j=this.settings.openTag,k=this.settings.closeTag,l=new RegExp(j+"=(.*?)"+k,"igm"),m=new RegExp(j+"=#(.*?)"+k,"igm"),n=new RegExp("//"+j+"?\\s*(.*?)\\s*"+k+"?","igm"),o=/\s*tag:(\w+):?([\u4e00-\u9fa5]+|\w+|\d+)?\s*/gim,p=new RegExp(j+"\\s*include((.*?))\\s*;?\\s*"+k,"igm"),q=function(a,e){var g=e.replace("('","").replace("')","").replace('("',"").replace('")',""),h="string"==typeof c(g)?g:null==c(g)?g:c(g).value||c(g).innerHTML,i=d.compile(h,b,{include:!0,name:g}).toString().split("\n").join("");return i=i.replace("anonymous","anonymous"+f),i+=" if(data) { out += anonymous"+f+"(data); }",j+" "+i+" "+k},r=function(a,b,c){var e="undefined"==typeof c?d.tags[b]():d.tags[b](c.toString());return"'"+e.toString()+"'"};if(a=a.replace(/(^\s*)|(\s*$)/g,"").replace(m,function(){return"'+'"}).replace(n,"").replace(p,q).replace(l,function(a,b){return"'+"+b+"+'"}).split("\n"),i){for(var s=0,t=a.length;t>s;s++)a[s]=a[s].toString().replace(/(^\s*)|(\s*$)/g,"")+"_&_"+j+" _line="+(s+1)+"; "+k+"_&_";a=a.join("").split("_&_")}for(var s=0,t=a.length;t>s;s++)a[s]=a[s].trim(),h&&(a[s]=this.xssFilter(a[s],j,k)),a[s]="out+='"+a[s]+"';",a[s]=a[s].replace(o,r),a[s]=a[s].replace("out+='"+j,"").replace(k+"';","").replace("}';","}"),a[s]=a[s].replace(/^out\+\=\'\/\/(.*?)\'\;$/,function(a,b){return"/* "+b+" */"}).replace("'';';","'';");var u="var objectCount = function(data){var total=0;for(var i in data){total++} return total;};",v="console.error('[tileTemplate]\\n"+this.escape(e.name)+"\\n\\n[type]\\nRender error\\n\\nmessage: '+e.message+'\\nline: '+(e.line+1));",w="try {"+a.join("")+"\n return out; } catch(e) { e.line=_line; if(objectCount(data) > 0) { "+v+" }}";a="var out = '', _line=0;\n "+(i?w:a.join("")+"\n return out;");var x="function extract(obj, parent) {for (var i in obj) { parent[i] = obj[i];}}",y=new Function("data",u+x+"extract(data, this);"+a);return y},b.render=function(a,b,d){d=d||"";var e=this.settings.cached,f="string"==typeof c(a)?a:null==c(a)?a:c(a).value||c(a).innerHTML,g=""==d?a:d;if(e&&"undefined"!=typeof this.caches[g])return this.caches[g];var h=this.compile(f,b,{name:""==d?a:d})(b);return e&&(this.caches[g]=h),h},b.tag=function(a,b){this.tags[a]=b},b.clear=function(a){return delete this.caches[a],!0}});